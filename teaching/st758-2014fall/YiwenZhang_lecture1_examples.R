# Lecture 1 Examples
# 
# Author: Yiwen Zhang
#
# Date: Aug 26th 2014
###############################################################################

##====================================##
## 1: Numeric vectors
##====================================##

##--------------------------------------
## Create vector
##--------------------------------------
a <- 1:3
a <- seq(1, 3, 1)
a <- c(1, 2, 3 )


##--------------------------------------
## Recycling
##--------------------------------------
a <- 1:3
b <- 1:5
a+b


##--------------------------------------
## Subset
##--------------------------------------

b[c(1,2)]

b > 1
b[ b > 1 ]


##--------------------------------------
## Vectorize
##--------------------------------------

a <- 1:100

exp(a)

a <- 1:10

gamma(a+1)


##====================================##
## Summary: Loops can be avoided
##====================================##

##--------------------------------------
## Example 1
##--------------------------------------
a <- 1:100
a[c(2, 20,30)] <- NA
a

# method 1
for(i in 1:100){
  if(is.na(a[i]))
     a[i] <- 0
}

# method 2
a <- ifelse(!is.na(a), a, 0)

# method 3
a[is.na(a)] <- 0
a

##--------------------------------------
## Example 2: Create AR(1) covariance matrix
## Hint: outer
##--------------------------------------

aa <- diag(10)
aa<- aa*10
rho <- 0.5

for(i in 1:10){
  for(j in 1:10){
    aa[i,j] <- rho^abs(i-j)
  }
}

a <- 1:10
b <- a

power <- outer(a, b, 
    function(x, y) return(abs(x-y)))

rho <- 0.5
rhoM <- rho^power

diag(rhoM) <- diag(rhoM)*10




##====================================##
## 2: Character Strings
##====================================##

##--------------------------------------
## Paste
##--------------------------------------

paste('Student', 1:10, sep="_")

##--------------------------------------
## Strsplit
##--------------------------------------

strsplit("Yiwen Zhang", split=" ")

a <- paste('Student', 1:10, sep="_")
strsplit(a, split='_')

sapply(a, function(x)
  return(strsplit(x,split='_')[[1]][2])
  
##--------------------------------------
## Regular Expression
##--------------------------------------

grepl('10', ex1)

gsub('Student_', '', a)

##--------------------------------------
## Data Type
##--------------------------------------

mix <- c( 1, 2, 3, "c")



##====================================##
## 3: Matrices
##====================================##

##--------------------------------------
## Create Matrix
##--------------------------------------

a <- matrix(NA, 3, 3)

##--------------------------------------
## Matrix Operation
##--------------------------------------
b <- matrix(1, 3, 3)

a + b

a <- matrix(2, 3, 3)

b%*%a
 
b / a

##--------------------------------------
## Vector and Matrix
##--------------------------------------

b <- 1:3

a <- matrix(1, 3, 3)

a + b

a*b

##====================================##
## 4. Lists and Data Frame
##====================================##

a <- 1:5
b <- matrix(1, 5, 5)
c <- 'func'
d <- lm

out <- list(first = a, second = b, thrid = c, fourth = d)
out

out[1]

out[[1]]

out$first 

out['first']

##--------------------------------------
## See your dataframe
##--------------------------------------

data(iris)
str(iris)
dim(iris)
head(iris)

iris$Species <- as.character(iris$Species)

iris[2,3]

iris[,1]

iris[, 'Sepal.Length']

iris$Sepal.Length
